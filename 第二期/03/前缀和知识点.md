[toc]

# å‰ç¼€å’Œ&&åç¼€å’Œ

> å‰ç¼€å’Œæ˜¯ä¸€ç§å¸¸ç”¨çš„ç®—æ³•æŠ€æœ¯ï¼Œç”¨äºå¿«é€Ÿè®¡ç®—æ•°ç»„æˆ–çŸ©é˜µçš„æŸä¸ªå­åŒºé—´çš„å’Œã€‚é€šè¿‡é¢„å¤„ç†æ•°ç»„æˆ–çŸ©é˜µï¼Œå‰ç¼€å’Œå¯ä»¥å°†æŸ¥è¯¢çš„æ—¶é—´å¤æ‚åº¦ä»O(n)é™ä½åˆ°O(1)ï¼Œä»è€Œæé«˜ç®—æ³•çš„æ•ˆç‡ã€‚

## ä½¿ç”¨

+ ç»™å®šä¸€ä¸ªé•¿åº¦ä¸ºnçš„æ•°ç»„a,ç»™å‡ºqä¸ªæŸ¥è¯¢ï¼Œæ¯ä¸ªæŸ¥è¯¢ç»™å‡ºæ•°å­—l,r (1<=l<=r<=n )ï¼Œè®¡ç®—aæ•°ç»„ç¬¬lä¸ªæ•°åˆ°ç¬¬rä¸ªæ•°çš„å’Œï¼Œè¦æ±‚æ—¶é—´å¤æ‚åº¦æœ€å¤šä¸ºï¼ˆq+n)

+ åšæ³•ï¼š

+ ä½¿ç”¨å‰ç¼€å’Œæ•°ç»„ `num`è¡¨ç¤ºå‰iä¸ªæ•°çš„å’Œ

+ æ¯æ¬¡æŸ¥è¯¢

  //

  ```c++
   a[l]+a[l+1]+...a[r] = ( a[1]+a[2]+..a[r] ) - (a[1]+a[2]+.. a[l-1]) = pre[r]-pre[l-1]
  ```

  ## å†™æ³•

__æ ¸å¿ƒè¦ç‚¹__ __`pre[i]=pre[i-1]+a[i]`__

```c++
int n;
std::cin >> n;
vector<int> a(n+1,0),pre(n+1,0);
for (int i = 1; i <= n; i++)
    std::cin >> a[i];
for (int i = 1; i <= n; i++)
    pre[i] = pre[i-1] + a[i];//pre[i]=pre[i-1]+a[i]
int q;
cin>>q;
while(q--){
    int l,r;
    cin>>l>>r;
    cout<<pre[r]-pre[l-1]<<endl;
}
```

+ å€¼å¾—æ³¨æ„çš„æ˜¯å‰ç¼€å’Œæ•°ç»„ä¸€èˆ¬å¼€n+1çš„é•¿åº¦ï¼Œé¿å… è¶Šç•Œè®¿é—®ï¼ˆæ¯”å¦‚`pre[-1]`ï¼‰ çš„æƒ…å†µ

+ å¸¸å¸¸ä¸åŒæŒ‡é’ˆç®—æ³•ç›¸å…³

+ >å³ç”¨ä¸¤ä¸ªç´¢å¼•å»ç»´æŠ¤æŸ¥è¯¢åŒºé—´çš„æ–¹æ³•

### å‰ç¼€å’Œæ•°ç»„å¼€né•¿åº¦æ—¶çš„å¤„ç†

```c++
	int n;
    std::cin >> n;
    vector<int> a(n),pre(n);
    for (int i = 0; i < n; i++)
        std::cin >> a[i];
    pre[0]=a[0];
    for (int i = 1; i < n; i++)
        pre[i] = pre[i-1] + a[i];
```



# æ—¶é—´å¤æ‚åº¦

å¦‚æœä½¿ç”¨æš´åŠ›çš„æŸ¥è¯¢æ—¶é—´å¤æ‚åº¦ä¼šæ˜¯Oï¼ˆn*qï¼‰ï¼Œå®¹æ˜“è¶…æ—¶

é€šè¿‡å¯¹å‰ç¼€å’Œçš„é¢„å¤„ç†ï¼Œå¯ä»¥åœ¨æ¯qæ¬¡æŸ¥è¯¢ä¸­æŠŠæ—¶é—´å¤æ‚åº¦ä»O(n)é™ä½ä¸ºO(1)

# åç¼€å’Œ

+ åç¼€å’Œé€šå¸¸å¯ä»¥ç”¨å‰ç¼€å’Œè¡¨ç¤º 

+ åç¼€å’Œæ•°ç»„`suf` :` suf[i]`:è¡¨ç¤ºç¬¬iä¸ªå…ƒç´ åˆ°æ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ çš„å’Œ

+ __æ ¸å¿ƒè¦ç‚¹__ __`suf[i]=suf[i+1]+a[i]`__

  + ç¬¬ä¸€ç§æ„å»º`suf` `suf[i]=suf[i+1]+a[i]`

  ```c++
  int n;
  std::cin >> n;
  vector<int> a(n+1,0),pre(n+1,0),suf(n+2,0);//å¼€n+2ä¸preå¼€n+1åŒç†
  for (int i = 1; i <= n; i++)
      std::cin >> a[i];
  for (int i = 1; i <= n; i++)
      pre[i] = pre[i-1] + a[i];
  for(int i=n;i>=1;i--)
  	suf[i]=suf[i+1]+a[i];
  ```

  +  ç¬¬äºŒç§æ„å»º`suf` `suf[i]=pre[n]-pre[i-1]`

  ```c++
  int n;
  std::cin >> n;
  vector<int> a(n+1,0),pre(n+1,0),suf(n+2,0);//å¼€n+2ä¸preå¼€n+1åŒç†
  for (int i = 1; i <= n; i++)
      std::cin >> a[i];
  for (int i = 1; i <= n; i++)
      pre[i] = pre[i-1] + a[i];
  for(int i=1;i<=n;i++)
  	suf[i]=pre[n]-pre[i-1];
  ```

# äºŒç»´å‰ç¼€å’Œ

> #### åŸºäºå®¹æ–¥åŸç†
>
> è¿™ç§æ–¹æ³•å¤šç”¨äºäºŒç»´å‰ç¼€å’Œçš„æƒ…å½¢ã€‚ç»™å®šå¤§å°ä¸º ğ‘š Ã—ğ‘›![m\times n](data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7) çš„äºŒç»´æ•°ç»„ ğ´![A](data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)ï¼Œè¦æ±‚å‡ºå…¶å‰ç¼€å’Œ ğ‘†![S](data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)ã€‚é‚£ä¹ˆï¼Œğ‘†![S](data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7) åŒæ ·æ˜¯å¤§å°ä¸º ğ‘š Ã—ğ‘›![m\times n](data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7) çš„äºŒç»´æ•°ç»„ï¼Œä¸”
>
> ğ‘†ğ‘–,ğ‘—=âˆ‘ğ‘–â€²â‰¤ğ‘–âˆ‘ğ‘—â€²â‰¤ğ‘—ğ´ğ‘–â€²,ğ‘—â€².

+ å½¢å¼ä¸Š å¯ä»¥å†™æˆ

```c++
int n;
std::cin >> n;
vector<vector<int>> a(n+1,vector<int>ï¼ˆn+1,0),pre(n+1,vector<int>ï¼ˆn+1,0),suf(n+1,vector<int>ï¼ˆn+1,0);;
for (int i = 1; i <= n; i++){
	for(int j=1;j<=n;j++)
		std::cin>>a[i][j];
}
for(int i=1;i<=n;i++){
	for(int j=1;j<=n;j++){
		pre[i][j]=pre[i-1][j]+pre[i][j-1]+a[i][j]-pre[i-1][j-1];
	}
}
for(int i=n;i>=1;i--){
	for(int j=n;j>=1;j--){
		suf[i][j]=suf[i+1][j]+suf[i][j+1]+a[i][j]-suf[i+1][j+1];
	}
}
```

# ä¾‹é¢˜

é¢˜ç›®é“¾æ¥ï¼š[1480. ä¸€ç»´æ•°ç»„çš„åŠ¨æ€å’Œ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/running-sum-of-1d-array/description/?envType=problem-list-v2&envId=prefix-sum)



é¢˜ç›®æè¿°;ç»™ä½ ä¸€ä¸ªæ•°ç»„ `nums` ã€‚æ•°ç»„ã€ŒåŠ¨æ€å’Œã€çš„è®¡ç®—å…¬å¼ä¸ºï¼š`runningSum[i] = sum(nums[0]â€¦nums[i])` ã€‚

è¯·è¿”å› `nums` çš„åŠ¨æ€å’Œã€‚

## ç¤ºä¾‹

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [1,2,3,4]
è¾“å‡ºï¼š[1,3,6,10]
è§£é‡Šï¼šåŠ¨æ€å’Œè®¡ç®—è¿‡ç¨‹ä¸º [1, 1+2, 1+2+3, 1+2+3+4] ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [1,1,1,1,1]
è¾“å‡ºï¼š[1,2,3,4,5]
è§£é‡Šï¼šåŠ¨æ€å’Œè®¡ç®—è¿‡ç¨‹ä¸º [1, 1+1, 1+1+1, 1+1+1+1, 1+1+1+1+1] ã€‚
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šnums = [3,1,2,10,1]
è¾“å‡ºï¼š[3,4,6,16,17]
```

 ## æ–¹æ¡ˆ

__ä½¿ç”¨å‰ç¼€å’Œéå†ä¸€æ¬¡å³å¯__

```
class Solution {
public:
    vector<int> runningSum(vector<int>& nums) {
        int n=nums.size();
        vector<int> pre(n,0);
        pre[0]=nums[0];
        for(int i=1;i<n;i++)pre[i]=pre[i-1]+nums[i];
        return pre;
    }
};
```



# ä½œä¸š

é¢˜ç›®é“¾æ¥ï¼š

1. [3354. ä½¿æ•°ç»„å…ƒç´ ç­‰äºé›¶ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/make-array-elements-equal-to-zero/?envType=problem-list-v2&envId=prefix-sum)
2. [525. è¿ç»­æ•°ç»„ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/contiguous-array/?envType=problem-list-v2&envId=prefix-sum)

